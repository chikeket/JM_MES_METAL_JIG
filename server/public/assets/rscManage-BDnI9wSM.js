import{_ as Q,y as R,r as T,z as B,o as W,c as N,w as o,f as a,d as e,g as r,e as d,b as S,h as M,F as $,a as v,p as X,t as I,j as V,k as w,v as k}from"./index-TO8iFplr.js";const Z={class:"button-group"},h={class:"search-filter-box"},ll={class:"grid-box"},el={class:"table-wrapper"},ol=["onUpdate:modelValue"],al=["onUpdate:modelValue"],tl=["onUpdate:modelValue"],sl=["onUpdate:modelValue"],nl={class:"button-group"},rl={class:"form-box"},dl={class:"form-scroll-wrapper"},ul={class:"form-row"},il={class:"form-row"},ml={class:"form-row"},pl={class:"form-row"},fl={class:"form-row"},cl={class:"form-row"},_l={__name:"rscManage",setup(Cl){const u=R({materialName:"",materialType:""}),s=R({materialCode:"",materialType:"",materialName:"",spec:"",unit:"",remark:""}),i=T([]),_=T(null),b=T(null),H=T(""),U=B(()=>i.value.slice(0,10)),A=B(()=>{const n=U.value.length;return Math.max(0,10-n)}),L=(n,l)=>{_.value=l,b.value=n.rsc_id,s.materialCode=n.rsc_id,s.materialType=n.rsc_clsf_id,s.materialName=n.rsc_nm,s.spec=n.spec,s.unit=n.unit,s.remark=n.rmrk,H.value=n.rsc_id},x=async()=>{try{i.value=Array.from({length:15},(n,l)=>({rsc_id:`MAT${String(l+1).padStart(4,"0")}`,rsc_clsf_id:`TYPE${l%3+1}`,rsc_nm:`자재명${l+1}`,spec:`규격${l+1}`,unit:l%2===0?"EA":"KG",rmrk:`비고${l+1}`})),u.materialName&&(i.value=i.value.filter(n=>n.rsc_nm.includes(u.materialName))),u.materialType&&(i.value=i.value.filter(n=>n.rsc_clsf_id.includes(u.materialType))),_.value=null,b.value=null,console.log("조회 완료:",i.value.length,"건")}catch(n){console.error("조회 실패:",n),alert("데이터 조회에 실패했습니다."),i.value=[]}},j=()=>{u.materialName="",u.materialType="",i.value=[],_.value=null},P=()=>{_.value=null,Object.keys(s).forEach(n=>{s[n]=""})},z=async()=>{try{if(!s.materialCode){alert("자재코드를 입력해주세요.");return}const n={rsc_id:s.materialCode,rsc_clsf_id:s.materialType,rsc_nm:s.materialName,spec:s.spec,unit:s.unit,rmrk:s.remark},l=!b.value;alert(l?"등록되었습니다.":"수정되었습니다."),await x()}catch(n){console.error("저장 실패:",n),alert("저장에 실패했습니다.")}},G=async()=>{try{if(!b.value){alert("삭제할 항목을 선택해주세요.");return}if(!confirm("선택한 항목을 삭제하시겠습니까?"))return;alert("삭제되었습니다."),await x(),P()}catch(n){console.error("삭제 실패:",n),alert("삭제에 실패했습니다.")}};return W(()=>{}),(n,l)=>{const C=d("CButton"),Y=d("CFormLabel"),f=d("CFormInput"),y=d("CCol"),D=d("CFormSelect"),F=d("CRow"),c=d("CTableHeaderCell"),g=d("CTableRow"),K=d("CTableHead"),p=d("CTableDataCell"),O=d("CTableBody"),q=d("CTable"),J=d("CContainer");return v(),N(J,{fluid:"",class:"h-100 d-flex flex-column"},{default:o(()=>[a("div",Z,[e(C,{color:"secondary",onClick:x},{default:o(()=>[...l[12]||(l[12]=[r("조회",-1)])]),_:1}),e(C,{color:"secondary",onClick:j},{default:o(()=>[...l[13]||(l[13]=[r("초기화",-1)])]),_:1})]),a("div",h,[e(F,{class:"g-3"},{default:o(()=>[e(y,{md:4},{default:o(()=>[e(Y,{class:"form-label"},{default:o(()=>[...l[14]||(l[14]=[r("자재명",-1)])]),_:1}),e(f,{modelValue:u.materialName,"onUpdate:modelValue":l[0]||(l[0]=t=>u.materialName=t),placeholder:"입력해주세요"},null,8,["modelValue"])]),_:1}),e(y,{md:4},{default:o(()=>[e(Y,{class:"form-label"},{default:o(()=>[...l[15]||(l[15]=[r("자재분류타입",-1)])]),_:1}),e(D,{modelValue:u.materialType,"onUpdate:modelValue":l[1]||(l[1]=t=>u.materialType=t)},{default:o(()=>[...l[16]||(l[16]=[a("option",{value:""},"선택해주세요",-1),a("option",{value:"TYPE1"},"TYPE1",-1),a("option",{value:"TYPE2"},"TYPE2",-1),a("option",{value:"TYPE3"},"TYPE3",-1)])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),e(F,{class:"flex-grow-1 overflow-hidden g-3"},{default:o(()=>[e(y,{md:6,class:"d-flex flex-column"},{default:o(()=>[l[23]||(l[23]=a("div",{class:"button-group",style:{height:"48px","margin-bottom":"1rem"}},null,-1)),a("div",ll,[a("div",el,[e(q,{bordered:"",hover:"",class:"data-table"},{default:o(()=>[e(K,null,{default:o(()=>[e(g,null,{default:o(()=>[e(c,{style:{width:"100px"}},{default:o(()=>[...l[17]||(l[17]=[r("자재코드",-1)])]),_:1}),e(c,{style:{width:"120px"}},{default:o(()=>[...l[18]||(l[18]=[r("자재분류타입",-1)])]),_:1}),e(c,{style:{width:"140px"}},{default:o(()=>[...l[19]||(l[19]=[r("자재명",-1)])]),_:1}),e(c,{style:{width:"100px"}},{default:o(()=>[...l[20]||(l[20]=[r("규격",-1)])]),_:1}),e(c,{style:{width:"80px"}},{default:o(()=>[...l[21]||(l[21]=[r("수량단위",-1)])]),_:1}),e(c,null,{default:o(()=>[...l[22]||(l[22]=[r("비고",-1)])]),_:1})]),_:1})]),_:1}),e(O,null,{default:o(()=>[(v(!0),S($,null,M(U.value,(t,E)=>(v(),N(g,{key:E,onClick:m=>L(t,E),class:X(["data-row",{"selected-row":_.value===E}])},{default:o(()=>[e(p,{class:"text-center"},{default:o(()=>[r(I(t.rsc_id),1)]),_:2},1024),e(p,{class:"text-center"},{default:o(()=>[r(I(t.rsc_clsf_id),1)]),_:2},1024),e(p,null,{default:o(()=>[V(a("input",{"onUpdate:modelValue":m=>t.rsc_nm=m,class:"cell-input",onClick:l[2]||(l[2]=w(()=>{},["stop"]))},null,8,ol),[[k,t.rsc_nm]])]),_:2},1024),e(p,null,{default:o(()=>[V(a("input",{"onUpdate:modelValue":m=>t.spec=m,class:"cell-input",onClick:l[3]||(l[3]=w(()=>{},["stop"]))},null,8,al),[[k,t.spec]])]),_:2},1024),e(p,{class:"text-center"},{default:o(()=>[V(a("input",{"onUpdate:modelValue":m=>t.unit=m,class:"cell-input",onClick:l[4]||(l[4]=w(()=>{},["stop"]))},null,8,tl),[[k,t.unit]])]),_:2},1024),e(p,null,{default:o(()=>[V(a("input",{"onUpdate:modelValue":m=>t.rmrk=m,class:"cell-input",onClick:l[5]||(l[5]=w(()=>{},["stop"]))},null,8,sl),[[k,t.rmrk]])]),_:2},1024)]),_:2},1032,["onClick","class"]))),128)),(v(!0),S($,null,M(A.value,t=>(v(),N(g,{key:"empty-"+t,class:"empty-row"},{default:o(()=>[e(p,{colspan:"6"})]),_:1}))),128))]),_:1})]),_:1})])])]),_:1}),e(y,{md:6,class:"d-flex flex-column"},{default:o(()=>[a("div",nl,[e(C,{color:"secondary",onClick:P},{default:o(()=>[...l[24]||(l[24]=[r("신규",-1)])]),_:1}),e(C,{color:"secondary",onClick:z},{default:o(()=>[...l[25]||(l[25]=[r("저장",-1)])]),_:1}),e(C,{color:"danger",onClick:G},{default:o(()=>[...l[26]||(l[26]=[r("삭제",-1)])]),_:1})]),a("div",rl,[a("div",dl,[a("div",ul,[l[27]||(l[27]=a("label",{class:"form-label-inline"},"자재코드",-1)),e(f,{modelValue:s.materialCode,"onUpdate:modelValue":l[6]||(l[6]=t=>s.materialCode=t),placeholder:"입력해주세요",disabled:""},null,8,["modelValue"])]),a("div",il,[l[29]||(l[29]=a("label",{class:"form-label-inline"},"자재분류타입",-1)),e(D,{modelValue:s.materialType,"onUpdate:modelValue":l[7]||(l[7]=t=>s.materialType=t)},{default:o(()=>[...l[28]||(l[28]=[a("option",{value:""},"선택해주세요",-1),a("option",{value:"TYPE1"},"TYPE1",-1),a("option",{value:"TYPE2"},"TYPE2",-1),a("option",{value:"TYPE3"},"TYPE3",-1)])]),_:1},8,["modelValue"])]),a("div",ml,[l[30]||(l[30]=a("label",{class:"form-label-inline"},"자재명",-1)),e(f,{modelValue:s.materialName,"onUpdate:modelValue":l[8]||(l[8]=t=>s.materialName=t),placeholder:"입력해주세요"},null,8,["modelValue"])]),a("div",pl,[l[31]||(l[31]=a("label",{class:"form-label-inline"},"규격",-1)),e(f,{modelValue:s.spec,"onUpdate:modelValue":l[9]||(l[9]=t=>s.spec=t),placeholder:"입력해주세요"},null,8,["modelValue"])]),a("div",fl,[l[32]||(l[32]=a("label",{class:"form-label-inline"},"수량단위",-1)),e(f,{modelValue:s.unit,"onUpdate:modelValue":l[10]||(l[10]=t=>s.unit=t),placeholder:"입력해주세요"},null,8,["modelValue"])]),a("div",cl,[l[33]||(l[33]=a("label",{class:"form-label-inline"},"비고",-1)),e(f,{modelValue:s.remark,"onUpdate:modelValue":l[11]||(l[11]=t=>s.remark=t),placeholder:"입력해주세요"},null,8,["modelValue"])])])])]),_:1})]),_:1})]),_:1})}}},bl=Q(_l,[["__scopeId","data-v-8b587b81"]]);export{bl as default};
