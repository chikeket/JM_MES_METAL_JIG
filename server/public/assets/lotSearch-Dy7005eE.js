import{_ as U,y as h,r as S,D as V,z as L,b as u,f as o,j as p,v as c,F as z,h as g,g as r,m as $,a as m,E as T,t as i,u as f}from"./index-TO8iFplr.js";const W={class:"container-fluid h-100 d-flex flex-column p-3"},X={class:"search-filter-box mb-2"},B={class:"row g-3 align-items-end"},F={class:"col-12 col-md-3"},A={class:"col-12 col-md-3"},C={class:"col-12 col-md-3"},I={class:"col-12 col-md-3"},O={class:"d-flex align-items-center gap-1"},j={class:"grid-box flex-grow-1 d-flex flex-column overflow-hidden"},q={class:"table-wrapper flex-grow-1"},G={class:"data-table w-100"},P={class:"text-center th-resizable"},Y={class:"th-resizable"},H={class:"th-resizable"},J={class:"th-resizable"},K={class:"th-resizable"},Q={class:"th-resizable"},Z={class:"th-resizable"},tt={class:"th-resizable"},st={class:"th-resizable"},ot={class:"th-resizable"},et={class:"th-resizable"},nt={class:"text-center"},lt=["title"],rt=["title"],it=["title"],at=["title"],dt=["title"],ut=["title"],mt=["title"],pt=["title"],ct=["title"],xt=["title"],_t=15,ft={__name:"lotSearch",setup(bt){const n=h({lot_no:"",rsc_nm:"",wrhous_nm:"",in_dt_from:"",in_dt_to:""}),x=S([]),b=S(["35px","120px","100px","140px","100px","100px","80px","60px","110px","110px","300px"]),a=h({idx:-1,startX:0,startW:0});function l(e,t){t.preventDefault();const s=parseInt(String(b.value[e]||"").replace(/px$/,""))||0;a.idx=e,a.startX=t.clientX,a.startW=s,document.body.classList.add("resizing"),document.addEventListener("mousemove",v),document.addEventListener("mouseup",w)}function v(e){if(a.idx<0)return;const t=e.clientX-a.startX,y=Math.min(600,Math.max(56,a.startW+t));b.value[a.idx]=`${y}px`}function w(){a.idx=-1,document.body.classList.remove("resizing"),document.removeEventListener("mousemove",v),document.removeEventListener("mouseup",w)}V(()=>{document.removeEventListener("mousemove",v),document.removeEventListener("mouseup",w)});const D=L(()=>x.value),E=L(()=>Math.max(0,_t-x.value.length));function M(e){if(e==null||e==="")return"";const t=Number(e);return Number.isFinite(t)?t.toLocaleString():String(e)}function k(e){if(!e)return"";try{if(typeof e=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(e))return e;const t=new Date(e);if(isNaN(t.getTime()))return"";const s=t.getFullYear(),d=String(t.getMonth()+1).padStart(2,"0"),y=String(t.getDate()).padStart(2,"0");return`${s}-${d}-${y}`}catch{return""}}const _=k;function N(){n.lot_no="",n.rsc_nm="",n.wrhous_nm="",n.in_dt_from="",n.in_dt_to="",x.value=[]}async function R(){try{const e={...n},{data:t}=await $.get("/api/lot-stock",{params:e});x.value=Array.isArray(t?.data)?t.data:[]}catch(e){console.error("검색 오류",e),alert("검색 중 오류가 발생했습니다.")}}return(e,t)=>(m(),u("div",W,[o("div",{class:"d-flex justify-content-end mb-2 gap-2"},[o("button",{class:"btn btn-secondary btn-sm",onClick:R},"조회"),o("button",{class:"btn btn-secondary btn-sm",onClick:N},"초기화")]),o("div",X,[o("div",B,[o("div",F,[t[16]||(t[16]=o("label",{class:"form-label"},"LOT번호",-1)),p(o("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>n.lot_no=s),type:"text",class:"form-control"},null,512),[[c,n.lot_no]])]),o("div",A,[t[17]||(t[17]=o("label",{class:"form-label"},"자재명",-1)),p(o("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>n.rsc_nm=s),type:"text",class:"form-control"},null,512),[[c,n.rsc_nm]])]),o("div",C,[t[18]||(t[18]=o("label",{class:"form-label"},"창고명",-1)),p(o("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>n.wrhous_nm=s),type:"text",class:"form-control"},null,512),[[c,n.wrhous_nm]])]),o("div",I,[t[20]||(t[20]=o("label",{class:"form-label"},"입고일자",-1)),o("div",O,[p(o("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>n.in_dt_from=s),type:"date",class:"form-control"},null,512),[[c,n.in_dt_from]]),t[19]||(t[19]=o("span",{class:"mx-1"},"~",-1)),p(o("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>n.in_dt_to=s),type:"date",class:"form-control"},null,512),[[c,n.in_dt_to]])])])])]),o("div",j,[o("div",q,[o("table",G,[o("colgroup",null,[(m(!0),u(z,null,g(b.value,(s,d)=>(m(),u("col",{key:d,style:T({width:s})},null,4))),128))]),o("thead",null,[o("tr",null,[o("th",P,[t[21]||(t[21]=r(" No",-1)),o("span",{class:"col-resizer",onMousedown:t[5]||(t[5]=s=>l(0,s))},null,32)]),o("th",Y,[t[22]||(t[22]=r(" LOT번호",-1)),o("span",{class:"col-resizer",onMousedown:t[6]||(t[6]=s=>l(1,s))},null,32)]),o("th",H,[t[23]||(t[23]=r(" 자재ID",-1)),o("span",{class:"col-resizer",onMousedown:t[7]||(t[7]=s=>l(2,s))},null,32)]),o("th",J,[t[24]||(t[24]=r(" 자재명",-1)),o("span",{class:"col-resizer",onMousedown:t[8]||(t[8]=s=>l(3,s))},null,32)]),o("th",K,[t[25]||(t[25]=r(" 창고명",-1)),o("span",{class:"col-resizer",onMousedown:t[9]||(t[9]=s=>l(4,s))},null,32)]),o("th",Q,[t[26]||(t[26]=r(" 존명",-1)),o("span",{class:"col-resizer",onMousedown:t[10]||(t[10]=s=>l(5,s))},null,32)]),o("th",Z,[t[27]||(t[27]=r(" 수량",-1)),o("span",{class:"col-resizer",onMousedown:t[11]||(t[11]=s=>l(6,s))},null,32)]),o("th",tt,[t[28]||(t[28]=r(" 단위",-1)),o("span",{class:"col-resizer",onMousedown:t[12]||(t[12]=s=>l(7,s))},null,32)]),o("th",st,[t[29]||(t[29]=r(" 입고일자",-1)),o("span",{class:"col-resizer",onMousedown:t[13]||(t[13]=s=>l(8,s))},null,32)]),o("th",ot,[t[30]||(t[30]=r(" 만료일자",-1)),o("span",{class:"col-resizer",onMousedown:t[14]||(t[14]=s=>l(9,s))},null,32)]),o("th",et,[t[31]||(t[31]=r(" 비고",-1)),o("span",{class:"col-resizer",onMousedown:t[15]||(t[15]=s=>l(10,s))},null,32)])])]),o("tbody",null,[(m(!0),u(z,null,g(D.value,(s,d)=>(m(),u("tr",{key:d},[o("td",nt,i(d+1),1),o("td",{class:"text-start",title:s.lot_no},i(s.lot_no),9,lt),o("td",{class:"text-start",title:s.rsc_id},i(s.rsc_id),9,rt),o("td",{class:"text-start",title:s.rsc_nm},i(s.rsc_nm),9,it),o("td",{class:"text-start",title:s.wrhous_nm},i(s.wrhous_nm),9,at),o("td",{class:"text-start",title:s.zone_nm},i(s.zone_nm),9,dt),o("td",{class:"text-end",title:M(s.qty)},i(M(s.qty)),9,ut),o("td",{class:"text-start",title:s.unit},i(s.unit||""),9,mt),o("td",{class:"text-start",title:f(_)(s.in_dt)},i(f(_)(s.in_dt)),9,pt),o("td",{class:"text-start",title:f(_)(s.exp_dt)},i(f(_)(s.exp_dt)),9,ct),o("td",{class:"text-start",title:s.rm},i(s.rm||""),9,xt)]))),128)),(m(!0),u(z,null,g(E.value,s=>(m(),u("tr",{key:"empty-"+s,class:"empty-row"},[...t[32]||(t[32]=[o("td",{colspan:"13"}," ",-1)])]))),128))])])])])]))}},wt=U(ft,[["__scopeId","data-v-70bff569"]]);export{wt as default};
