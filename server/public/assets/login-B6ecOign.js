import{_ as v,r as l,i as f,b as _,f as s,j as u,v as i,t as b,k as g,l as w,a as y,m as x}from"./index-TO8iFplr.js";const h={class:"login-wrapper"},k={class:"form-row"},B={class:"form-row"},M={class:"actions"},S=["disabled"],U={__name:"login",setup(V){const a=l(""),o=l(""),r=l(!1),d=l(""),p=f(),m=w();async function c(){if(d.value="",!a.value||!o.value){alert("아이디와 비밀번호를 입력하세요.");return}r.value=!0;try{const{data:t}=await x.post("/api/login",{id:a.value,pw:o.value});t?.ok?(p.setUser(t.user),console.log("로그인 성공:",t.user),alert(`${t.user.emp_nm}님 환영합니다.`),m.push("/dashboard")):alert("로그인 실패")}catch(t){console.error("login error",t);const e=t?.response;e?.status===401?alert(e?.data?.message||"인증 실패"):alert(e?.data?.message||"로그인 실패")}finally{r.value=!1}}return(t,e)=>(y(),_("div",h,[s("form",{class:"login-form",onSubmit:g(c,["prevent"])},[e[4]||(e[4]=s("h2",null,"로그인",-1)),s("fieldset",null,[s("div",k,[e[2]||(e[2]=s("label",{for:"username"},"아이디",-1)),u(s("input",{"onUpdate:modelValue":e[0]||(e[0]=n=>a.value=n),type:"text",id:"username",name:"username",autocomplete:"username",required:""},null,512),[[i,a.value]])]),s("div",B,[e[3]||(e[3]=s("label",{for:"password"},"비밀번호",-1)),u(s("input",{"onUpdate:modelValue":e[1]||(e[1]=n=>o.value=n),type:"password",id:"password",name:"password",autocomplete:"current-password",required:""},null,512),[[i,o.value]])]),s("div",M,[s("button",{type:"submit",class:"btn btn-xs btn-outline-secondary",disabled:r.value},b(r.value?"처리중...":"로그인"),9,S)])])],32)]))}},D=v(U,[["__scopeId","data-v-9882c25b"]]);export{D as default};
